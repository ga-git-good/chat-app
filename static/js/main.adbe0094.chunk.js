(this["webpackJsonpreact-auth-template"]=this["webpackJsonpreact-auth-template"]||[]).push([[0],{121:function(e,t,a){},122:function(e,t,a){"use strict";a.r(t);var n,r=a(0),s=a(29),c=a.n(s),o=(a(89),a(3)),l=a(14),u=a(13),i=Object(r.createContext)(),j=a(2),d="SET_USERNAME",b="SET_USER_ID",m="SET_TOKEN",O="SET_SIGNEDIN",p="SET_ROOMS_ID",h="SET_STATE",f="SET_SERVER_USERS",g="ADD_CACHE",x=[d,b,m,O,p,f,h],v=function(e,t){switch(t.type){case g:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{cachedPfps:[]}):Object(j.a)(Object(j.a)({},e),{},{cachedPfps:t.payload});case d:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{userName:null}):Object(j.a)(Object(j.a)({},e),{},{userName:t.payload});case b:case b:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{userId:null}):Object(j.a)(Object(j.a)({},e),{},{userId:t.payload});case m:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{token:null}):Object(j.a)(Object(j.a)({},e),{},{token:t.payload});case O:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{loggedIn:!1}):Object(j.a)(Object(j.a)({},e),{},{loggedIn:t.payload});case p:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{rooms:null}):Object(j.a)(Object(j.a)({},e),{},{rooms:t.payload});case f:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{serverUsers:null}):Object(j.a)(Object(j.a)({},e),{},{serverUsers:t.payload});case h:return null===t.payload?Object(j.a)(Object(j.a)({},e),{},{shouldSaveState:!1}):Object(j.a)(Object(j.a)({},e),{},{shouldSaveState:t.payload});default:return e}},w=a(15),N=a(131),y=a(132),S=a(12),C=a.n(S),E=a(22),k="https://gg-chat-api.herokuapp.com",P="http://localhost:3040",I="localhost"===window.location.hostname?P:k,T=a(25),R=a.n(T),_=function(){var e=Object(E.a)(C.a.mark((function e(t,a){var n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,console.log("buffer:"),console.log(n),(r=new FormData).append("pfp",n),s={method:"POST",body:r},console.log(s),e.abrupt("return",fetch(I+"/upload/"+a,s));case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),U=function(e){return R()({url:I+"/sign-in/",method:"POST",data:{credentials:{userName:e.userName,password:e.password}}})},D=a(9),G=a(48),A=a(1),L=function(e){var t=e.closeModal,a=Object(r.useContext)(i),n=a.state,s=(a.dispatch,Object(u.f)()),c=n.loggedIn,l=n.token,j=Object(r.useState)(""),d=Object(o.a)(j,2),b=d[0],m=d[1],O=Object(r.useState)(""),p=Object(o.a)(O,2),h=p[0],f=p[1];return c?Object(A.jsx)("div",{className:"row changePass-parent-wrapper ",children:Object(A.jsx)("div",{className:"changePass-form-wrapper",children:Object(A.jsxs)(D.a,{className:"changePass-form",children:[Object(A.jsxs)(D.a.Group,{controlId:"oldPassword",children:[Object(A.jsx)(D.a.Label,{children:"Old password"}),Object(A.jsx)(D.a.Control,{required:!0,name:"oldPassword",value:b,type:"password",placeholder:"Old Password",onChange:function(e){return m(e.target.value)}})]}),Object(A.jsxs)(D.a.Group,{controlId:"newPassword",children:[Object(A.jsx)(D.a.Label,{children:"New Password"}),Object(A.jsx)(D.a.Control,{required:!0,name:"newPassword",value:h,type:"password",placeholder:"New Password",onChange:function(e){return f(e.target.value)}})]}),Object(A.jsx)(G.a,{variant:"primary",type:"button",onClick:function(){(function(e,t){return console.log(e,t,"Hello thereerer"),R()({url:I+"/change-password/",method:"PATCH",headers:{Authorization:"Bearer ".concat(t)},data:{passwords:{old:e.old,new:e.new}}})})({old:b,new:h},l).then((function(e){t(),console.log(props,"kaskdakddkadasndakdaksdkandakdsd")})).then((function(){return s.push("/")})).catch((function(e){f(""),m("")}))},children:"Submit"})]})})}):Object(A.jsx)(u.a,{to:"/"})},B=function(e){e.title;var t=Object(r.useState)(!1),a=Object(o.a)(t,2),n=a[0],s=a[1],c=function(){return s(!1)};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(w.b,{to:"/change-password",className:"nav-link",onClick:function(){return s(!0)},children:"Change Password"}),Object(A.jsxs)(y.a,{show:n,onHide:c,centered:!0,children:[Object(A.jsx)(y.a.Header,{closeButton:!0,children:Object(A.jsx)(y.a.Title,{className:"changePass-modal-title",children:"Change Password"})}),Object(A.jsx)(y.a.Body,{children:Object(A.jsx)(u.b,{path:"/change-password",render:function(){return Object(A.jsx)(L,{closeModal:c})}})})]})]})},q=function(e){var t=e.user,a=Object(r.useState)(!1),n=Object(o.a)(a,2);n[0],n[1];return Object(A.jsx)(A.Fragment,{children:Object(A.jsxs)(N.a,{className:"parent-dropdown-wrapper",children:[Object(A.jsx)(N.a.Toggle,{className:"dropdown-username",children:t.userName}),Object(A.jsxs)(N.a.Menu,{className:"dropdown-menu",children:[Object(A.jsx)(w.b,{to:"/",className:"nav-link",children:"Upload image"}),Object(A.jsx)(B,{}),Object(A.jsx)(N.a.Divider,{className:"divider"}),Object(A.jsx)(w.b,{to:"/sign-out",className:"nav-link",children:"Sign Out"})]})]})})},F=function(e){return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)(q,{user:e})})},H=Object(A.jsxs)(r.Fragment,{children:[Object(A.jsx)(w.b,{to:"/sign-in",className:"link login",children:"Login"}),Object(A.jsx)(w.b,{to:"/sign-up",className:"link register",children:"Register"})]}),z=function(){var e=Object(r.useContext)(i),t=e.state,a=(e.dispatch,t);return Object(A.jsxs)("div",{className:"header-wrapper",children:[Object(A.jsx)("div",{className:"logo-wrapper",children:Object(A.jsx)(w.b,{to:"/",className:"link",children:Object(A.jsx)("span",{className:"logo-text",children:"Chat APP"})})}),Object(A.jsx)("div",{className:"links-group-1",children:a.loggedIn?F(a):H})]})},M=a(41),J=a(129),V=a(130),K=a(79),Q=a(83),W=function(e){var t=e.received,a=e.room,n=Object(r.useContext)(i),s=n.state,c=(n.dispatch,s.loggedIn,s.userId,s.token),l=s.userName,u=Object(r.useState)(""),j=Object(o.a)(u,2),d=j[0],b=j[1],m=Object(r.useState)(null),O=Object(o.a)(m,2),p=O[0],h=O[1],f=Object(r.useState)(!1),g=Object(o.a)(f,2),x=g[0],v=g[1],w=Object(r.useState)(!1),N=Object(o.a)(w,2),y=(N[0],N[1]);Object(r.useEffect)((function(){if(!x){console.log("connecting socket");var e=Object(Q.a)(I,{withCredentials:!1,query:{token:c}});e.on("connect",(function(){console.log("connected!")})),e.on("loggedin",(function(a){a?(y(!0),e.on("message",t)):(console.log("failed to log in"),alert("failed to log in"))})),h(e),v(!0)}}),[]),Object(r.useEffect)((function(){console.log("seeing this pop up here as well",a),a&&p.emit("join",{roomId:a})}),[a]);return Object(A.jsx)(A.Fragment,{children:""!==a?Object(A.jsxs)("form",{className:"message-input-window",onSubmit:function(e){if(e.preventDefault(),p){var t={message:d,roomId:a,timestamp:(new Date).toLocaleString(),userName:l};p.emit("send-message",t),console.log("sent message: "),console.log(t),b("")}},children:[Object(A.jsx)("input",{value:d,onChange:function(e){return b(e.target.value)},className:"message-input"}),Object(A.jsx)("button",{type:"submit",className:"send-message",children:"Send"})]}):""})},X=function(){var e=Object(E.a)(C.a.mark((function e(t,a,n){var r,s,c,o;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.sessionStorage,s=t.filter((function(e){return!a.some((function(t){return t!==e._id}))})),e.prev=2,e.next=5,Promise.all(s.map(function(){var e=Object(E.a)(C.a.mark((function e(t){var a,n,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={userName:t.userName},e.next=3,fetch(I+"/img/"+t.userName);case 3:return n=e.sent,r=n.headers.get("Content-Type"),e.next=7,n.arrayBuffer();case 7:return s=e.sent,a.data=Z(r,s),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return c=e.sent,o=0===a.length?[]:Object(M.a)(a),c.forEach((function(e){r.setItem(e.userName,e.data),o.push(e.userName)})),n({type:g,payload:o}),e.abrupt("return",!0);case 12:return e.prev=12,e.t0=e.catch(2),console.error(e.t0),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,a,n){return e.apply(this,arguments)}}(),Y=function(e){var t=window.sessionStorage.getItem(e);return t||I+"/img/"+e},Z=function(e,t){var a="data:".concat(e,";base64,"),n="";return new Uint8Array(t).forEach((function(e){return n+=String.fromCharCode(e)})),a+window.btoa(n)},$={color:"rgba(123, 115, 115, .85)"},ee=function(e){console.log("imgurl:");var t=I+"/img/"+e.userName;return console.log(t),Object(A.jsxs)("div",{className:"message-layout",children:[Object(A.jsx)("img",{col:"1",className:"userImage",src:Y(e.userName)}),Object(A.jsxs)("li",{col:"2",children:[Object(A.jsx)("strong",{children:e.userName})," ",Object(A.jsx)("a",{style:$,children:e.timestamp}),":",Object(A.jsx)("br",{}),Object(A.jsx)("section",{className:"message-text",children:e.text})]})]})},te=function(e){var t=e.room;return Object(r.useEffect)((function(){console.log("in room: ",t)}),[t]),Object(A.jsx)(A.Fragment,{children:t?Object(A.jsx)("h3",{className:"room-title",children:t}):""})},ae=function(e,t,a){return R()({method:"POST",url:I+"/create-room",headers:{Authorization:"Bearer ".concat(a)},data:{room:{name:e},userId:t}})},ne=function(e){return R()({method:"GET",url:I+"/show-rooms",headers:{Authorization:"Bearer ".concat(e)}})},re=function(e,t){return R()({method:"GET",url:I+"/show-room-users",headers:{Authorization:"Bearer ".concat(e)},data:{roomID:t}})},se=function(e){return R()({method:"GET",url:I+"/show-server-users",headers:{Authorization:"Bearer ".concat(e)}})},ce=function(e){var t=e.name,a=e.status,n=I+"/img/"+t;return Object(r.useEffect)((function(){}),[a]),Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)("img",{col:"1",className:"user-image",src:n}),Object(A.jsx)("span",{className:"user-name",children:t}),Object(A.jsx)("span",{className:"user-status",children:"online"===a?Object(A.jsx)("img",{src:"https://icongr.am/octicons/rss.svg?size=16&color=36ba38"}):""})]})},oe=function(){var e=Object(r.useContext)(i),t=e.state,a=e.dispatch,n=t.serverUsers,s=t.token,c=Object(r.useState)(null),l=Object(o.a)(c,2),u=l[0],j=l[1];return Object(r.useEffect)(Object(E.a)(C.a.mark((function e(){var t,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se(s);case 2:return n=e.sent,console.log("users array : ",n.data.user),t=n.data.user,e.next=7,a({type:f,payload:t});case 7:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)(Object(E.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("server users: ",n),j(n.map((function(e){return Object(A.jsx)("li",{className:"user-list-item",children:Object(A.jsx)(ce,{name:e.userName,status:e.status})},e._id)})));case 2:case"end":return e.stop()}}),e)}))),[n]),Object(A.jsx)("ul",{className:"user-list",children:u})},le=(a(121),function(e){var t=e.setRoomName,a=e.onCreateRoom,n=e.roomName;console.log("props","sasasaddsdasdasdsad mainContent");var s=Object(r.useState)(!1),c=Object(o.a)(s,2),l=c[0],u=c[1],i=function(){return u(!1)};return Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(G.a,{className:"create-room-button",onClick:function(){return u(!0)},children:Object(A.jsx)("span",{className:"create-room-span",children:"+"})}),Object(A.jsxs)(y.a,{show:l,onHide:i,centered:!0,children:[Object(A.jsx)(y.a.Header,{closeButton:!0,children:Object(A.jsx)(y.a.Title,{className:"createRoom-modal-title",children:"Create Room"})}),Object(A.jsx)(y.a.Body,{children:Object(A.jsx)(D.a,{onSubmit:function(e){return a(e,i)},children:Object(A.jsxs)(D.a.Group,{controlId:"room-name",children:[Object(A.jsx)(D.a.Control,{required:!0,type:"room-name",name:"create-room",value:n,placeholder:"Enter Room Name",onChange:function(e){return t(e.target.value)}}),Object(A.jsx)("button",{type:"submit",className:"create-button",children:"Create"})]})})})]})]})}),ue=function(){var e=Object(r.createRef)();return Object(r.useEffect)((function(){return e.current.scrollIntoView({behavior:"smooth"})})),Object(A.jsx)("div",{ref:e})},ie=function(){console.log("maincontent reloaded");var e=Object(r.useContext)(i),t=e.state,a=e.dispatch,n=Object(r.useState)([]),s=Object(o.a)(n,2),c=s[0],l=s[1],u=Object(r.useState)([]),j=Object(o.a)(u,2),d=j[0],b=j[1],m=Object(r.useState)(null),O=Object(o.a)(m,2),h=O[0],f=O[1],g=Object(r.useState)(""),x=Object(o.a)(g,2),v=x[0],w=x[1],N=t.rooms,y=t.userId,S=t.token,k=t.serverUsers,P=t.cachedPfps,I=Object(r.useState)(null),T=Object(o.a)(I,2),R=T[0],_=T[1],U=Object(r.useState)(null),D=Object(o.a)(U,2),G=(D[0],D[1]),L=Object(r.useState)(""),B=Object(o.a)(L,2),q=B[0],F=B[1],H=Object(r.useState)(""),z=Object(o.a)(H,2),Q=z[0],Y=z[1],Z=Object(r.useState)(""),$=Object(o.a)(Z,2),se=$[0],ce=$[1],ie=Object(r.useState)(""),je=Object(o.a)(ie,2),de=je[0],be=je[1];Object(r.useEffect)((function(){console.log("fetching pfps"),console.log("already cached userNames:"),console.log(P),X(k,P,a).then((function(e){e||console.error("failed to cache images")}))}),[k]);var me=function(){var e=Object(E.a)(C.a.mark((function e(){var t,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(S,q);case 2:return a=e.sent,t=a.data.user,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){console.log("room has been changed"),Q!==q&&(console.log("changed room: ",Q),l([]),F(Q),ce(de),me().then((function(e){G(e.map((function(e){return Object(A.jsx)("li",{children:"".concat(e.name)})})))})))}),[Q]),Object(r.useEffect)((function(){N&&(console.log(N),_(N.map((function(e){return Object(A.jsx)("li",{children:Object(A.jsx)("a",{href:"#",onClick:function(){return function(e,t){console.log("changing room to: ",e),Y(e),be(t)}(e._id,e.name)},children:"".concat(e.name)})},"".concat(e._id))}))))}),[N]),Object(r.useEffect)(Object(E.a)(C.a.mark((function e(){var t,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,ne(S);case 3:n=e.sent,r=n.data.room,console.log("existing rooms: ",r,"saved rooms: ",N),N&&N[0]||r.forEach((function(e){e.validUsers.includes(y)&&t.push(e)})),console.log(t),a({type:p,payload:t});case 9:case"end":return e.stop()}}),e)}))),[]);var Oe=function(){var e=Object(E.a)(C.a.mark((function e(n,r){var s,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),s=[],console.log(v,t.userId),e.next=5,ae(v,y,S);case 5:c=e.sent,N.length>0?(r(),(s=Object(M.a)(N)).push(c.data.room)):s=[c.data.room],a({type:p,payload:s}),console.log(c);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){if(console.log("hit new message useeffect"),h){var e=Object(M.a)(c);e.push(h),l(e),f(null)}}),[h]),Object(r.useEffect)((function(){b(c.map((function(e,t){return Object(A.jsx)(ee,{userName:e.userName,timestamp:e.timestamp,text:e.message},e.userName+t.toString())})))}),[c]),Object(A.jsx)(J.a,{className:"main-container",children:Object(A.jsxs)(V.a,{className:"top-row",children:[Object(A.jsxs)(K.a,{className:"col-3 left-side-options",children:[Object(A.jsxs)("div",{className:"left-side-nav",children:[Object(A.jsx)(V.a,{children:Object(A.jsxs)(K.a,{style:{position:"relative"},children:[Object(A.jsx)(K.a,{children:Object(A.jsx)("h4",{className:"roomsHeader",children:"Rooms"})}),Object(A.jsx)(le,{onCreateRoom:Oe,roomName:v,setRoomName:w})]})}),Object(A.jsx)(V.a,{children:Object(A.jsx)("section",{className:"open-rooms",children:Object(A.jsx)("ul",{className:"room-list",children:R})})})]}),Object(A.jsxs)(V.a,{className:"active-users",children:[Object(A.jsx)("h4",{className:"roomsHeader",children:"Users"}),Object(A.jsx)(oe,{})]})]}),Object(A.jsxs)(K.a,{className:"main-content col-9",children:[Object(A.jsx)(V.a,{children:Object(A.jsx)(te,{room:se})}),Object(A.jsx)("section",{className:"messages-window",children:Object(A.jsxs)("ul",{className:"messages",children:[q?d:"No room selected. Please join a room to start a conversation!",Object(A.jsx)(ue,{})]})}),Object(A.jsx)(W,{received:function(e){console.log("setting new msg"),console.log(e),f(e)},room:q})]})]})})},je=function(){var e=Object(r.useContext)(i),t=e.state,a=e.dispatch,n=t.loggedIn,s=Object(u.f)(),c=Object(r.useState)(""),l=Object(o.a)(c,2),j=l[0],d=l[1],O=Object(r.useState)(""),p=Object(o.a)(O,2),h=p[0],f=p[1],g=Object(r.useState)(""),x=Object(o.a)(g,2),v=x[0],w=x[1],N=Object(r.useState)(""),y=Object(o.a)(N,2),S=y[0],k=y[1],P=Object(r.createRef)(),T=function(){var e=Object(E.a)(C.a.mark((function e(t){var n,r,c;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(P.current),console.log(P.current.files),n=P.current.files[0],r=n.name.split(".").pop(),console.log(r),(o=c={email:j,userName:h,password:v,passwordConfirmation:S},R()({method:"POST",url:I+"/sign-up/",data:{credentials:{email:o.email,password:o.password,password_confirmation:o.passwordConfirmation,userName:o.userName,pfpType:o.pfpType}}})).then((function(){return U(c)})).then((function(e){_(P.current.files[0],e.data.user.userName),a({type:b,payload:e.data.user._id}),a({type:m,payload:e.data.user.token})})).then((function(){})).then((function(){return s.push("/")})).catch((function(e){d(""),f(""),w(""),k("")}));case 8:case"end":return e.stop()}var o}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(A.jsx)(u.a,{to:"/"}):Object(A.jsx)("div",{className:"row signup-parent-wrapper",children:Object(A.jsxs)("div",{className:"signup-form-wrapper",children:[Object(A.jsx)("h3",{className:"signup-header3",children:"Sign Up"}),Object(A.jsxs)(D.a,{className:"signup-form",onSubmit:T,children:[Object(A.jsxs)(D.a.Group,{children:[Object(A.jsx)(D.a.Label,{children:"Email address"}),Object(A.jsx)(D.a.Control,{required:!0,type:"email",name:"email",value:j,placeholder:"Enter email",onChange:function(e){return d(e.target.value)}})]}),Object(A.jsxs)(D.a.Group,{children:[Object(A.jsx)(D.a.Label,{children:"Username"}),Object(A.jsx)(D.a.Control,{required:!0,type:"username",name:"username",value:h,placeholder:"Enter username",onChange:function(e){return f(e.target.value)}})]}),Object(A.jsxs)(D.a.Group,{children:[Object(A.jsx)(D.a.Label,{children:"Password"}),Object(A.jsx)(D.a.Control,{required:!0,name:"password",value:v,type:"password",placeholder:"Password",onChange:function(e){return w(e.target.value)}})]}),Object(A.jsxs)(D.a.Group,{children:[Object(A.jsx)(D.a.Label,{children:"Password Confirmation"}),Object(A.jsx)(D.a.Control,{required:!0,name:"passwordConfirmation",value:S,type:"password",placeholder:"Confirm Password",onChange:function(e){return k(e.target.value)}})]}),Object(A.jsxs)(D.a.Group,{children:[Object(A.jsx)(D.a.Label,{children:"Profile Picture"}),Object(A.jsx)(D.a.Control,{type:"file",name:"image",id:"imagePicker",accept:"image/*",multiple:!1,ref:P})]}),Object(A.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})},de=(a(123),function(){var e=Object(r.useContext)(i),t=e.state,a=e.dispatch,n=t.loggedIn,s=Object(r.useState)(""),c=Object(o.a)(s,2),l=c[0],j=c[1],h=Object(r.useState)(""),f=Object(o.a)(h,2),g=f[0],x=f[1];return n?Object(A.jsx)(u.a,{to:"/"}):Object(A.jsx)("div",{className:"row signin-parent-wrapper",children:Object(A.jsxs)("div",{className:"signin-form-wrapper",children:[Object(A.jsx)("h3",{className:"signin-header3",children:"Login"}),Object(A.jsxs)(D.a,{onSubmit:function(e){e.preventDefault(),U({userName:l,password:g}).then((function(e){a({type:b,payload:e.data.user._id}),a({type:m,payload:e.data.user.token}),a({type:O,payload:!0}),a({type:d,payload:e.data.user.userName}),a({type:p,payload:e.data.user.rooms})})).then((function(){})).then((function(){return history.push("/")})).catch((function(e){j(""),x("")}))},className:"signin-form",children:[Object(A.jsxs)(D.a.Group,{controlId:"username",children:[Object(A.jsx)(D.a.Label,{className:"label-username",children:"Username"}),Object(A.jsx)(D.a.Control,{required:!0,type:"username",name:"username",value:l,placeholder:"Enter username",onChange:function(e){return j(e.target.value)}})]}),Object(A.jsxs)(D.a.Group,{controlId:"password",children:[Object(A.jsx)(D.a.Label,{children:"Password"}),Object(A.jsx)(D.a.Control,{required:!0,name:"password",value:g,type:"password",placeholder:"Password",onChange:function(e){return x(e.target.value)}})]}),Object(A.jsx)(G.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})}),be=function(){var e=Object(r.useContext)(i),t=e.state,a=e.dispatch,n=Object(u.f)(),s=t.loggedIn,c=t.token;return Object(r.useEffect)((function(){s&&function(e){return R()({url:I+"/sign-out/",method:"DELETE",headers:{Authorization:"Bearer ".concat(e)}})}(c).finally((function(){})).finally((function(){x.forEach((function(e){console.log(e),a({type:e,payload:null})}))})).finally((function(){return n.push("/")}))}),[]),s?null:Object(A.jsx)(u.a,{to:"/"})},me=(n={loggedIn:!1,userId:null,userName:null,token:null,shouldSaveState:!1},Object(l.a)(n,"userName",null),Object(l.a)(n,"rooms",[]),Object(l.a)(n,"serverUsers",[]),Object(l.a)(n,"cachedPfps",[]),n),Oe=function(){var e=Object(r.useReducer)(v,me),t=Object(o.a)(e,2),a=t[0],n=t[1];return Object(A.jsxs)(i.Provider,{value:{state:a,dispatch:n},children:[Object(A.jsx)(z,{}),Object(A.jsxs)("main",{className:"container",children:[Object(A.jsx)(u.b,{path:"/sign-up",component:je}),Object(A.jsx)(u.b,{path:"/sign-in",component:de}),Object(A.jsx)(u.b,{path:"/sign-out",component:be})]}),a.loggedIn?Object(A.jsx)(ie,{}):""]})},pe=Object(A.jsx)(w.a,{basename:"/chat-app",children:Object(A.jsx)(Oe,{})});c.a.render(pe,document.getElementById("root"))},89:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.adbe0094.chunk.js.map